"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var ServerException=function(e){function t(t){var n=e.call(this)||this;return n.namespace=t.namespace,n.code=t.code,n.payload=t.payload,n}return __extends(t,e),t}(Error);exports.ServerException=ServerException;var DomainException=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ServerException);exports.DomainException=DomainException;var ConflictException=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ServerException);exports.ConflictException=ConflictException;var NotFoundException=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ServerException);exports.NotFoundException=NotFoundException;var InputValidationException=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ServerException);exports.InputValidationException=InputValidationException,Object.defineProperty(exports,"__esModule",{value:!0});var exceptions_1=require("./lib/exceptions"),Exceptional=function(){function e(e){this._namespace=e}return e.create=function(t){return new e(t)},e.prototype.ServerException=function(e,t){return this._instantiate(exceptions_1.ServerException,e,t)},e.prototype.DomainException=function(e,t){return this._instantiate(exceptions_1.DomainException,e,t)},e.prototype.ConflictException=function(e,t){return this._instantiate(exceptions_1.ConflictException,e,t)},e.prototype.NotFoundException=function(e,t){return this._instantiate(exceptions_1.NotFoundException,e,t)},e.prototype.InputValidationException=function(e,t){return this._instantiate(exceptions_1.InputValidationException,e,t)},e.prototype.format=function(e){return this._namespace.render(e)+e.stack},e.prototype._instantiate=function(e,t,n){return new e({namespace:this._namespace.name,code:t,payload:n})},e}();exports.Exceptional=Exceptional,Object.defineProperty(exports,"__esModule",{value:!0});var Namespace=function(){function e(e){this.name=e,this._tables=[]}return e.prototype.loadTable=function(e){this._tables.push(e)},e.prototype.render=function(e){var t=this,n=this._tables.find(function(e){return e.namespace===t.name});if(!n)throw this.name+" has no registered table for "+e.namespace+".";var o=n.errors[e.code];return this._renderTemplate(o,e.payload)},e.prototype._renderTemplate=function(e,t){if(!t)return e;for(var n in t)e=e.replace("${"+n+"}",t[n]);return e},e}();exports.Namespace=Namespace,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./exceptional"),t=require("./lib/namespace");function n(e){var n=exports.namespaceRegistry.get(e);return n||(n=new t.Namespace(e),exports.namespaceRegistry.set(e,n),n)}exports.namespaceRegistry=new Map,exports.registerTable=function(e){n(e.namespace).loadTable(e)},exports.context=function(t){return e.Exceptional.create(n(t))}});