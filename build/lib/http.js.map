{"version":3,"sources":["lib/http.ts"],"names":[],"mappings":";;AAAA,6CAKsB;AAOtB;;;;GAIG;AACH;IAIE,YACE,IAAiH;QAEjH,EAAE,CAAC,CAAC,IAAI,YAAY,4BAAe,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,8BAAiB,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,8BAAiB,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,8BAAiB,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,6BAAgB,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;QAAE,IAAI,CAAC,CAAC;YACP,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE;gBACnC,IAAI,EAAE,CAAC;gBACP,SAAS,EAAE,SAAS;gBACpB,OAAO,EAAE,EAAE;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,CACD,OAAO,IAAI,KAAK,QAAQ;gBACxB,IAAI,KAAK,IACX,CAAC,CAAC,CAAC;gBACD,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACnD,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE;wBACrC,UAAU,EAAG,IAAe,CAAC,oBAAoB,CAAC,GAAG,CAAC;wBACtD,QAAQ,EAAE,KAAK;wBACf,YAAY,EAAE,KAAK;wBACnB,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC;qBACjB,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;YAC5B,CAAC;YAED,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACxB,CAAC;IACH,CAAC;CACF;AAhDD,sCAgDC","file":"http.js","sourcesContent":["import {\r\n  IException, GenericException,\r\n  DomainException, ConflictException,\r\n  InputValidationException, NotFoundException,\r\n  ThrottleException\r\n} from './exceptions';\r\n\r\nexport interface IHttpException {\r\n  statusCode: number,\r\n  error: IException <any>\r\n}\r\n\r\n/**\r\n * High level HTTP API exception class.\r\n *\r\n * @author Dragos Sebestin\r\n */\r\nexport class HttpException implements IHttpException {\r\n  public statusCode: number;\r\n  public error: IException<any>;\r\n\r\n  constructor (\r\n    base: GenericException<any> | DomainException<any> | ConflictException<any> | InputValidationException<any> | any\r\n  ) {\r\n    if (base instanceof DomainException) {\r\n      this.error = base;\r\n      this.statusCode = 403;\r\n    } else if (base instanceof ConflictException) {\r\n      this.error = base;\r\n      this.statusCode = 409;\r\n    } else if (base instanceof NotFoundException) {\r\n      this.error = base;\r\n      this.statusCode = 404;\r\n    } else if (base instanceof ThrottleException) {\r\n      this.error = base;\r\n      this.statusCode = 429;\r\n    } else if (base instanceof GenericException) {\r\n      this.error = base;\r\n      this.statusCode = 500;\r\n    }  else {\r\n      this.error = Object.assign({}, base, {\r\n        code: 0,\r\n        namespace: 'default',\r\n        payload: {}\r\n      });\r\n\r\n      if (\r\n        typeof base === 'object' &&\r\n        base !== null\r\n      ) {\r\n        for (const key of Object.getOwnPropertyNames(base)) {\r\n          Object.defineProperty(this.error, key, {\r\n            enumerable: (base as Object).propertyIsEnumerable(key),\r\n            writable: false,\r\n            configurable: false,\r\n            value: base[key]\r\n          });\r\n        }\r\n      } else {\r\n        this.error.payload = base;\r\n      }\r\n\r\n      this.statusCode = 500;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"D:\\projects\\exceptional.js/src"}