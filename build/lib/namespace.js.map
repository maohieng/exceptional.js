{"version":3,"sources":["lib/namespace.ts"],"names":[],"mappings":";;AAGA;IAGE;;OAEG;IACH,YAAoB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QALxB,YAAO,GAAkB,EAAE,CAAC;IAKD,CAAC;IAEpC;;OAEG;IACH,SAAS,CAAE,KAAkB;QAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG;IACH,MAAM,CAAE,EAAmB;QACzB,mBAAmB;QACnB,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAC3B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,IAAI,CAC/B,CAAC;QAEF,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;YACT,MAAM,GAAG,IAAI,CAAC,IAAI,gCAAgC,EAAE,CAAC,SAAS,GAAG,CAAC;QAEpE,eAAe;QACf,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QACrC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAED;;OAEG;IACK,eAAe,CAAE,CAAS,EAAE,OAAY;QAC9C,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC;YACX,MAAM,CAAC,CAAC,CAAC;QACX,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,OAAO,CAAC,CAAC,CAAC;YACxB,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAC9C,CAAC;QAED,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;CACF;AA5CD,8BA4CC","file":"namespace.js","sourcesContent":["import {IErrorTable} from './IErrorTable';\r\nimport {IException} from './exceptions';\r\n\r\nexport class Namespace {\r\n  private _tables: IErrorTable[] = [];\r\n\r\n  /**\r\n   * Class constructor.\r\n   */\r\n  constructor (public name: string) {}\r\n\r\n  /**\r\n   * Load an error table in this namespace.\r\n   */\r\n  loadTable (table: IErrorTable) {\r\n    this._tables.push(table);\r\n  }\r\n\r\n  /**\r\n   * Render an exception.\r\n   */\r\n  render (ex: IException<any>) : string {\r\n    // find error table\r\n    let table = this._tables.find(\r\n      t => t.namespace === this.name\r\n    );\r\n\r\n    if (!table)\r\n      throw `${this.name} has no registered table for ${ex.namespace}.`;\r\n\r\n    // get template\r\n    let template = table.errors[ex.code];\r\n    return this._renderTemplate(template, ex.payload);\r\n  }\r\n\r\n  /**\r\n   * Render an exception template using a payload.\r\n   */\r\n  private _renderTemplate (t: string, payload: any) : string {\r\n    if (!payload)\r\n      return t;\r\n    for (let key in payload) {\r\n      t = t.replace(`\\$\\{${key}\\}`, payload[key]);\r\n    }\r\n\r\n    return t;\r\n  }\r\n}\r\n"],"sourceRoot":"D:\\projects\\exceptional.js/src"}